---
title: "Morphea"
author: "Thomas Vroylandt"
date: "`r format(Sys.time(), '%d/%m/%Y')`"
output: 
  html_document:
    css: style.css
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE,
                      warning = FALSE,
                      message = FALSE)
```

```{r import}
# packages
library(tidyverse)
library(reactable)
library(googlesheets4)
library(htmltools)

# Google Auth
gs4_deauth()

# data
df_tw_sheet <-
  read_sheet(Sys.getenv("SHEET_PATH"),
             sheet = "tw_fav")
```

## Table with my fav tweets

<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> 

```{r tab}
# printing functions

# table
df_tw_sheet %>%
  mutate(
    embed_url = paste0(
      "https://publish.twitter.com/oembed?url=https://twitter.com/",
      tolower(screen_name),
      "/status/",
      status_id
    )
  ) %>%
  select(embed_url) %>%
  reactable(columns = list(
    embed_url = colDef(
      name = "Tweet",
      cell = function(value){
        ret <- value %>%
          httr::GET() %>%
          httr::content()
        ret$html
      },
      html = TRUE
    )
  ))
```

## About it :

+ https://www.tillac-data.com/
+ https://github.com/tillac/morphea
